{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{MapContainer,TileLayer,GeoJSON,CircleMarker,Popup}from\"react-leaflet\";import Papa from\"papaparse\";import\"leaflet/dist/leaflet.css\";import file2017 from\"./assets/data/joined2017.csv\";import file2021 from\"./assets/data/joined2021.csv\";import file2022 from\"./assets/data/joined2022.csv\";import{useMediaQuery}from\"react-responsive\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProportionalSymbolMap=_ref=>{let{year}=_ref;const isDesktop=useMediaQuery({minWidth:801});const[mapWidth,setMapWidth]=useState(window.innerWidth);const fileMapping={2017:file2017,2021:file2021,2022:file2022};const columnName=\"gni_pc_m_\".concat(year);const csvData=fileMapping[year];const[data,setData]=useState([]);useEffect(()=>{if(csvData){Papa.parse(csvData,{download:true,header:true,skipEmptyLines:true,complete:result=>setData(result.data)});}},[csvData]);useEffect(()=>{const handleResize=()=>{setMapWidth(window.innerWidth);};window.addEventListener(\"resize\",handleResize);return()=>window.removeEventListener(\"resize\",handleResize);},[]);const scaleSize=value=>Math.sqrt(value)/10;// Adjust as necessary\nreturn/*#__PURE__*/_jsxs(MapContainer,{style:{height:\"500px\",width:isDesktop?\"\".concat(mapWidth*0.25,\"px\"):\"\".concat(mapWidth*0.9,\"px\")},center:[0,20]// Coordinates for Africa\n,zoom:3,children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}),data.map((row,index)=>{const lat=parseFloat(row.LABEL_Y);const lng=parseFloat(row.LABEL_X);const gni=parseFloat(row[columnName]);if(isNaN(lat)||isNaN(lng)||isNaN(gni))return null;return/*#__PURE__*/_jsx(CircleMarker,{center:[lat,lng],radius:scaleSize(gni),color:\"blue\",fillOpacity:0.6,children:/*#__PURE__*/_jsxs(Popup,{children:[/*#__PURE__*/_jsx(\"strong\",{children:row.SOV_A3}),/*#__PURE__*/_jsx(\"br\",{}),\"GNI per Capita (Male): \",gni,\" PPP($)\"]})},index);})]});};export default ProportionalSymbolMap;","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","GeoJSON","CircleMarker","Popup","Papa","file2017","file2021","file2022","useMediaQuery","jsx","_jsx","jsxs","_jsxs","ProportionalSymbolMap","_ref","year","isDesktop","minWidth","mapWidth","setMapWidth","window","innerWidth","fileMapping","columnName","concat","csvData","data","setData","parse","download","header","skipEmptyLines","complete","result","handleResize","addEventListener","removeEventListener","scaleSize","value","Math","sqrt","style","height","width","center","zoom","children","url","attribution","map","row","index","lat","parseFloat","LABEL_Y","lng","LABEL_X","gni","isNaN","radius","color","fillOpacity","SOV_A3"],"sources":["C:/Users/mirei/Desktop/undp-mapping/src/ProportionalSymbolMap.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { MapContainer, TileLayer, GeoJSON, CircleMarker, Popup } from \"react-leaflet\";\r\nimport Papa from \"papaparse\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport file2017 from \"./assets/data/joined2017.csv\";\r\nimport file2021 from \"./assets/data/joined2021.csv\";\r\nimport file2022 from \"./assets/data/joined2022.csv\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\n\r\nconst ProportionalSymbolMap = ({ year }) => {\r\n  const isDesktop = useMediaQuery({ minWidth: 801 });\r\n  const [mapWidth, setMapWidth] = useState(window.innerWidth);\r\n\r\n  const fileMapping = {\r\n    2017: file2017,\r\n    2021: file2021,\r\n    2022: file2022,\r\n  };\r\n  const columnName = `gni_pc_m_${year}`;\r\n  const csvData = fileMapping[year];\r\n  const [data, setData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (csvData) {\r\n      Papa.parse(csvData, {\r\n        download: true,\r\n        header: true,\r\n        skipEmptyLines: true,\r\n        complete: (result) => setData(result.data),\r\n      });\r\n    }\r\n  }, [csvData]);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setMapWidth(window.innerWidth);\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  const scaleSize = (value) => Math.sqrt(value) / 10; // Adjust as necessary\r\n\r\n  return (\r\n    <MapContainer\r\n      style={{\r\n        height: \"500px\",\r\n        width: isDesktop ? `${mapWidth * 0.25}px` : `${mapWidth * 0.9}px`,\r\n      }}\r\n      center={[0, 20]} // Coordinates for Africa\r\n      zoom={3}\r\n    >\r\n      <TileLayer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n      />\r\n      {data.map((row, index) => {\r\n        const lat = parseFloat(row.LABEL_Y);\r\n        const lng = parseFloat(row.LABEL_X);\r\n        const gni = parseFloat(row[columnName]);\r\n\r\n        if (isNaN(lat) || isNaN(lng) || isNaN(gni)) return null;\r\n\r\n        return (\r\n          <CircleMarker\r\n            key={index}\r\n            center={[lat, lng]}\r\n            radius={scaleSize(gni)}\r\n            color=\"blue\"\r\n            fillOpacity={0.6}\r\n          >\r\n            <Popup>\r\n              <strong>{row.SOV_A3}</strong>\r\n              <br />\r\n              GNI per Capita (Male): {gni} PPP($)\r\n            </Popup>\r\n          </CircleMarker>\r\n        );\r\n      })}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\nexport default ProportionalSymbolMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}